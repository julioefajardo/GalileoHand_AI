/*
 * NeuralNetworkFunction.c
 *
 * Code generation for function 'NeuralNetworkFunction'
 *
 */

/* Include files */
#include "rt_nonfinite.h"
#include "NeuralNetworkFunction.h"

/* Function Definitions */
void NeuralNetworkFunction(const float x1[12], float b_y1[5])
{
  float xp1[12];
  int ixstart;
  static const double settings_gain[12] = { 0.0176041667372667,
    0.0223281604121135, 12.5421730569038, 0.00568181818181818,
    0.0192307692307692, 0.0454545454545455, 0.0103626943005181,
    0.0232634719638523, 10.2608829489778, 0.0065359477124183, 0.0185185185185185,
    0.0285714285714286 };

  static const double settings_xoffset[12] = { 7.390533, 8.227014, 0.000382,
    10.0, 0.0, 0.0, 0.0, 24.13391, 0.005593, 132.0, 23.0, 0.0 };

  double b[30];
  static const double a[30] = { 1.564488617915472, -1.8180460971373458,
    -1.333053476134306, -1.68220193758677, -0.953653040164169,
    1.2788444090555355, -0.72348504053064355, -1.1986206596526792,
    -0.19299872019034162, -0.58608529713783519, -0.32501262885337845,
    0.59176962461992355, 0.20020569559974191, 0.0953015143029918,
    0.039475389119639187, 0.22104029515992729, -0.011295947618292321,
    -0.59644422103532757, 0.34946494659799343, 0.13348830636745548,
    0.95572020621154363, 0.5871869333932408, -1.1849624948634911,
    -0.83819737056801669, 1.0318611514097373, 1.7204758104252333,
    1.4833919245778877, 1.443882143582591, 1.6747389514826485, 1.997956020830163
  };

  float b_b[30];
  int ix;
  float denom;
  static const float fv0[360] = { 0.240529269F, 0.825076878F, 0.749817133F,
    0.231909066F, 0.552355945F, -0.0753697F, 0.287130296F, 0.765636802F,
    0.177173808F, 0.871456563F, 0.296848804F, 0.110016033F, 0.321611106F,
    0.749481499F, -0.669841468F, -0.458648622F, 1.72218454F, -0.218238473F,
    0.216657445F, 1.07214785F, 1.19084692F, 0.290633857F, -0.659952819F,
    -0.960216582F, 0.554103F, 0.311421871F, 0.973876715F, 0.419413865F,
    0.057511121F, -0.203221321F, -0.140912741F, 0.819767892F, -0.0063762581F,
    -1.19364941F, -0.0204130113F, 0.0713562816F, -1.13734686F, 0.551444054F,
    -0.456035435F, -0.509228647F, -0.812317312F, -0.619165659F, -0.482292533F,
    0.321857393F, -0.746161819F, -0.47143805F, -0.494722635F, 0.795460463F,
    0.0442613922F, 0.614946F, 0.399170429F, 0.846103668F, -0.602624595F,
    0.719036758F, 1.0975771F, -0.847417176F, -0.0225537382F, -0.299963117F,
    -0.106502905F, -0.198924631F, 0.856485784F, 0.200634465F, -0.258037418F,
    -0.217185423F, -1.10507011F, 0.027757708F, -0.51787F, -0.452089399F,
    -0.132479578F, 0.103725933F, -0.116906174F, 0.534572184F, 0.409598768F,
    0.918065906F, -1.25815153F, -0.549577534F, -0.702794731F, 0.58262372F,
    0.335445762F, 0.716977119F, -0.180198908F, -0.476606935F, 0.464147955F,
    -0.287818134F, -0.352046728F, 0.0661221F, -0.595446F, 0.416754693F,
    -0.854656875F, 1.01944244F, -1.54145837F, 0.55991F, 0.632949948F,
    0.162761182F, 0.22856842F, 0.495186836F, -0.482860565F, 0.312402368F,
    -1.10986006F, -0.728580296F, -0.373955101F, 0.161193416F, -0.94673413F,
    -0.384387583F, 1.33000386F, -0.0387130156F, 2.1912179F, -0.313903123F,
    0.914608121F, -0.521160185F, 0.57107091F, -0.891328335F, 0.544268489F,
    0.419276774F, 1.48287749F, -0.332072049F, -0.775390148F, -0.668791115F,
    0.487539977F, 0.379062086F, 0.0557841733F, -0.278706312F, 1.55043912F,
    0.0520417094F, 0.224913925F, -0.855039F, -0.926709473F, 0.101565048F,
    0.286643147F, -0.0446397848F, -0.366976649F, -1.77260482F, 0.299358606F,
    0.205101088F, 0.410538137F, -0.398938388F, -0.535141408F, 1.07730436F,
    1.05871451F, -0.379663646F, 0.398120612F, -0.0925110951F, 0.716520131F,
    0.587247312F, 0.41964826F, -0.452516377F, -0.079081133F, -0.406052083F,
    0.133516356F, 1.5046376F, 1.73344982F, 0.46834293F, -0.996666074F,
    0.384183019F, -1.06637275F, -0.646466076F, -1.13063669F, -0.281226665F,
    -0.167965665F, -0.615021F, 0.183349445F, 0.772130728F, 0.416054F,
    0.156051829F, -0.163790122F, 0.790339768F, -0.120547973F, -0.156045929F,
    1.10333204F, -0.353154302F, -0.42436257F, 1.59611356F, -0.183513671F,
    -0.558290958F, -0.681543F, 0.713467598F, -0.663813353F, -0.234941825F,
    0.535717666F, 0.0436240286F, 0.619300067F, 0.172599912F, 0.225456461F,
    -1.01569188F, -0.0409667119F, -0.766723692F, 0.468155921F, -0.117946543F,
    0.442168176F, -0.213282719F, -0.0669256672F, 0.985570848F, -0.576058745F,
    -0.766815603F, -1.13010418F, 0.139261082F, 0.488387406F, -0.682456076F,
    0.33518222F, 0.768675685F, -0.817804754F, -0.902627468F, -0.578367114F,
    0.330463529F, -0.944354057F, -0.436425209F, -0.47090587F, -0.639026463F,
    0.322482169F, -0.0511325859F, 0.164130792F, 0.320174515F, -0.164148018F,
    -0.0314943902F, 0.475766391F, -0.688671052F, 0.023676943F, -0.276572138F,
    1.07991672F, 0.73299557F, -0.413892239F, -0.243224964F, 0.0552203767F,
    -0.569835365F, 0.81543535F, 0.0409954935F, -0.91162467F, -0.885043323F,
    -0.0619769022F, 0.333774388F, 0.26685667F, -0.680629671F, 0.450226158F,
    -0.402685493F, 0.149202794F, 0.818928361F, -0.447500974F, -0.350496054F,
    1.42162883F, -0.900814414F, -0.0379006527F, 0.229572088F, -1.07368088F,
    0.540359676F, 0.352529824F, 0.0590514F, 0.32692492F, 0.851995468F,
    -0.563355148F, 0.255212843F, -0.839085042F, 0.1441935F, 0.32791239F,
    0.706440687F, -0.239741549F, -0.575431705F, -0.122952476F, 0.460948527F,
    -0.268303156F, 1.13640785F, -0.643313408F, -0.616016924F, -0.569256425F,
    -0.350139648F, -0.154398024F, -0.425750077F, 0.392464876F, -0.60092181F,
    -0.152384F, -0.511901F, -0.498114198F, -0.690005958F, 0.0507537F,
    -0.331242412F, -0.449914336F, -0.912105203F, 0.0152816698F, 0.2717655F,
    1.11073673F, -0.641636F, 0.846996903F, -1.1007756F, 0.838680923F,
    0.640875399F, 0.594527125F, -0.518519819F, -1.00047123F, -0.803248167F,
    -1.34746695F, 0.449386835F, 0.577854335F, -1.09096491F, -0.386223465F,
    0.730849326F, 0.197122753F, 0.67844975F, -0.151567712F, -0.845977F,
    -0.663343132F, 0.882F, -0.949572265F, -0.708658338F, 0.103809752F,
    0.0279214773F, 0.474339455F, -0.0551864244F, 1.13286173F, 0.738461196F,
    -0.430655569F, -0.924165845F, 0.858678877F, -0.103039622F, -1.14130223F,
    0.360570133F, 0.737878859F, 0.151931927F, -0.392471462F, 0.260434121F,
    0.501192868F, -1.09477103F, -0.853335679F, 0.24394235F, -0.645974278F,
    0.765086412F, 0.00668287184F, 0.296410382F, -0.668613493F, -0.558839083F,
    1.48937261F, -0.567157626F, 0.666211665F, 0.475907683F, -0.647152305F,
    0.0633498505F, 0.913560748F, -0.133958876F, 0.296087742F, 0.154449508F,
    -0.357476383F, -0.298451185F, 0.610565722F, 0.330749869F, -0.966284633F,
    -0.413107723F, 0.512214482F, -1.30418372F, 0.896544278F, -0.710846066F,
    -0.0643161F, -1.55161476F, -0.198854744F, 0.8370713F, -0.794990957F,
    0.447292417F, -0.0322272666F, 0.248853624F, 0.111439519F, 0.872479439F,
    0.840827644F, -1.03349316F };

  float x[30];
  double c_b[5];
  static const double b_a[5] = { -0.49905199038689546, 0.70810528886947977,
    0.34419090271788993, 0.71082525470708824, 0.37221880225940995 };

  float numer[5];
  static const float fv1[150] = { -0.499446064F, 0.075770393F, 1.80196154F,
    -0.341144502F, -1.24737418F, -0.143175825F, 0.286143392F, -0.128292531F,
    -0.760923743F, 0.894587755F, 0.866098821F, -1.05704975F, -0.98934561F,
    -0.670581937F, 0.69228071F, 0.270885795F, 0.34855783F, -0.967365503F,
    0.462002873F, 0.430699F, -0.628716111F, 0.156712621F, -0.972201228F,
    1.25708914F, -0.122338958F, -0.756481826F, -0.944227F, 0.608905196F,
    0.665998697F, -0.32355544F, -1.43320358F, 0.671280622F, -0.732173085F,
    0.974358678F, -0.321028352F, -0.0827701166F, 0.535226822F, 0.145514667F,
    0.606227338F, -0.435909748F, -1.08742404F, 1.09143078F, 0.527382135F,
    0.0121935159F, 0.248841569F, -0.116936728F, -0.0595562533F, 0.687148094F,
    0.455344647F, 0.207790285F, -0.705203F, 0.568180561F, -0.294055134F,
    0.766653121F, 0.344307125F, 0.312778234F, -0.311860174F, 1.18497038F,
    1.87682784F, -1.06762838F, -1.42962527F, -0.902796924F, 0.681376755F,
    -1.5476141F, -0.20499973F, -0.502496481F, 0.192403555F, 1.04885495F,
    -0.769733787F, -0.0786837637F, 0.847918391F, 0.219619125F, -1.94695055F,
    0.322616309F, 0.961865246F, 0.101677425F, -0.170915753F, 0.485832F,
    -0.158508629F, 0.00574459F, 0.918579578F, -2.26028681F, -0.811597228F,
    2.11498475F, -0.266457379F, 1.28805292F, -0.290762305F, 0.325220019F,
    -0.231889307F, -0.0941242203F, 1.38557887F, -0.380217165F, -0.145414218F,
    -0.185248077F, -0.590012789F, -1.44313896F, -1.29034936F, 1.39470172F,
    -0.584500849F, 1.19546735F, 0.337578326F, 0.797752261F, 0.871631384F,
    -0.647007108F, -0.247675881F, 1.35484338F, 0.166358411F, 1.12441218F,
    0.253828675F, -1.86326241F, 0.732768595F, -0.299831659F, -0.40266192F,
    -0.19367674F, 0.591036558F, 0.337595552F, 0.386464924F, -0.894588053F,
    -0.64654F, -0.772708416F, 0.111676686F, 1.14929831F, -0.849607587F,
    -0.947632909F, 0.704403102F, -0.90865767F, -0.569493651F, 0.467473388F,
    -0.383089393F, 0.576052487F, -0.924718499F, -0.24048388F, 0.319812775F,
    0.319776654F, 0.114054687F, 0.233734533F, -0.133290425F, -0.671373427F,
    0.704861701F, -0.704189897F, 0.064333342F, 1.73402321F, -1.54563236F,
    1.11699963F, -1.17821801F, 0.674982429F, 1.62872016F, -0.608306348F,
    -1.33225358F, 1.05692017F };

  boolean_T exitg1;
  float fv2[1];
  boolean_T b_x;

  /* MYNEURALNETWORKFUNCTION neural network simulation function. */
  /*  */
  /*  Generated by Neural Network Toolbox function genFunction, 04-Apr-2015 23:19:57. */
  /*   */
  /*  [y1] = myNeuralNetworkFunction(x1) takes these arguments: */
  /*    x = 12xQ matrix, input #1 */
  /*  and returns: */
  /*    y = 5xQ matrix, output #1 */
  /*  where Q is the number of samples. */
  /*  ===== NEURAL NETWORK CONSTANTS ===== */
  /*  Input 1 */
  /*  Layer 1 */
  /*  Layer 2 */
  /*  ===== SIMULATION ======== */
  /*  Dimensions */
  /*  samples */
  /*  Input 1 */
  /*  ===== MODULE FUNCTIONS ======== */
  /*  Map Minimum and Maximum Input Processing Function */
  for (ixstart = 0; ixstart < 12; ixstart++) {
    xp1[ixstart] = (x1[ixstart] - (float)settings_xoffset[ixstart]) * (float)
      settings_gain[ixstart] + -1.0F;
  }

  /*  Layer 1 */
  memcpy(&b[0], &a[0], 30U * sizeof(double));

  /*  Sigmoid Symmetric Transfer Function */
  for (ix = 0; ix < 30; ix++) {
    denom = 0.0F;
    for (ixstart = 0; ixstart < 12; ixstart++) {
      denom += fv0[ix + 30 * ixstart] * xp1[ixstart];
    }

    b_b[ix] = (float)b[ix] + denom;
  }

  for (ix = 0; ix < 30; ix++) {
    x[ix] = (real32_T)exp(-2.0F * b_b[ix]);
  }

  /*  Layer 2 */
  for (ixstart = 0; ixstart < 5; ixstart++) {
    c_b[ixstart] = b_a[ixstart];
  }

  for (ix = 0; ix < 30; ix++) {
    b_b[ix] = 2.0F / (1.0F + x[ix]) - 1.0F;
  }

  for (ix = 0; ix < 5; ix++) {
    denom = 0.0F;
    for (ixstart = 0; ixstart < 30; ixstart++) {
      denom += fv1[ix + 5 * ixstart] * b_b[ixstart];
    }

    numer[ix] = (float)c_b[ix] + denom;
  }

  /*  Competitive Soft Transfer Function */
  ixstart = 1;
  denom = numer[0];
  if (rtIsNaNF(numer[0])) {
    ix = 2;
    exitg1 = false;
    while ((!exitg1) && (ix < 6)) {
      ixstart = ix;
      if (!rtIsNaNF(numer[ix - 1])) {
        denom = numer[ix - 1];
        exitg1 = true;
      } else {
        ix++;
      }
    }
  }

  if (ixstart < 5) {
    while (ixstart + 1 < 6) {
      if (numer[ixstart] > denom) {
        denom = numer[ixstart];
      }

      ixstart++;
    }
  }

  for (ixstart = 0; ixstart < 5; ixstart++) {
    numer[ixstart] = (real32_T)exp(numer[ixstart] - denom);
  }

  denom = numer[0];
  for (ixstart = 0; ixstart < 4; ixstart++) {
    denom += numer[ixstart + 1];
  }

  fv2[0] = denom;
  b_x = (denom == 0.0F);
  ixstart = 0;
  if (b_x) {
    ixstart = 1;
  }

  ix = 0;
  while (ix <= ixstart - 1) {
    fv2[0] = 1.0F;
    ix = 1;
  }

  for (ixstart = 0; ixstart < 5; ixstart++) {
    b_y1[ixstart] = numer[ixstart] / fv2[0];
  }

  /*  Output 1 */
}

/* End of code generation (NeuralNetworkFunction.c) */
